# THIS FILE HAS BEEN GENERATED BY CHEF
# ANY MANUAL MODIFICATIONS WILL BE OVERWRITTEN
# (managed by the elasticsearch cookbook)

# Run Elasticsearch as this user ID and group ID
ES_USER=<%= node.elasticsearch[:user] %>
ES_GROUP=<%= node.elasticsearch[:group] %>

# Heap Size (defaults to 256m min, 1g max)
ES_HEAP_SIZE=<%= node.elasticsearch[:allocated_memory] %>

# Maximum locked memory size. Set to "unlimited" if you use the
# bootstrap.mlockall option in elasticsearch.yml. You must also set
# ES_HEAP_SIZE.
MAX_LOCKED_MEMORY=<%= node.elasticsearch[:limits][:memlock] %>

# Maximum number of VMA (Virtual Memory Areas) a process can own
<% if node[:index][:store][:type]=='mmapfs' -%>
MAX_MAP_COUNT=262144
<% else -%>
MAX_MAP_COUNT=65536
<% end -%>

# Additional Java OPTS
ES_JAVA_OPTS="
  -server
  -Djava.net.preferIPv4Stack=true
  -Xms<%= node.elasticsearch[:allocated_memory] %>
  -Xmx<%= node.elasticsearch[:allocated_memory] %>
  -Xss<%= node.elasticsearch[:thread_stack_size] %>
  <%= node.elasticsearch[:gc_settings] %>
"

# Configure restart on package upgrade (true, every other setting will lead to not restarting)
RESTART_ON_UPGRADE=true
