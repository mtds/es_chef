# THIS FILE HAS BEEN GENERATED BY CHEF
# ANY MANUAL MODIFICATIONS WILL BE OVERWRITTEN
# (managed by the elasticsearch cookbook)

#
# Detailed information about all the options are available here:
#
# http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/setup-service.html
# 

#####################
### Elasticsearch ###
#####################

# Elasticsearch home directory
#ES_HOME=/usr/share/elasticsearch

# Elasticsearch configuration directory
#CONF_DIR=/etc/elasticsearch

# Elasticsearch configuration file (elasticsearch.yml)
#CONF_FILE=/etc/elasticsearch/elasticsearch.yml

# Elasticsearch work directory
#WORK_DIR=/tmp/elasticsearch

# Elasticsearch log directory
#LOG_DIR=/var/log/elasticsearch

# Elasticsearch data directory
#DATA_DIR=/var/lib/elasticsearch

# Elasticsearch PID directory
#PID_DIR=/var/run/elasticsearch

# Heap Size (defaults to 256m min, 1g max)
ES_HEAP_SIZE=<%= node.elasticsearch['allocated_memory'] %>

# Heap new generation
#ES_HEAP_NEWSIZE=

# Max direct memory
#ES_DIRECT_SIZE=

# Additional Java OPTS
ES_JAVA_OPTS="
  -server
  -Djava.net.preferIPv4Stack=true
  -Xms<%= node.elasticsearch['allocated_memory'] %>
  -Xmx<%= node.elasticsearch['allocated_memory'] %>
  -Xss<%= node.elasticsearch['thread_stack_size'] %>
  <%= node.elasticsearch['gc_settings'] %>
"

# Configure restart on package upgrade (true, every other setting will lead to not restarting)
RESTART_ON_UPGRADE=true

# Path to the GC log file
#ES_GC_LOG_FILE=/var/log/elasticsearch/gc.log

#############################
### Elasticsearch service ###
#############################

# SysV init.d
#
# When executing the init script, this user will be used to run the elasticsearch service.
# The default value is 'elasticsearch' and is declared in the init.d file.
# Note that this setting is only used by the init script. If changed, make sure that
# the configured user can read and write into the data, work, plugins and log directories.
# For systemd service, the user is usually configured in file /usr/lib/systemd/system/elasticsearch.service
#
ES_USER=<%= node.elasticsearch['user'] %>
ES_GROUP=<%= node.elasticsearch['group'] %>

#########################
### System properties ###
#########################

# The maximum number of bytes of memory that may be locked into RAM. 
# Set to "unlimited" if you use the bootstrap.mlockall option in 
# elasticsearch.yml. You must also set ES_HEAP_SIZE.
# When using Systemd, the LimitMEMLOCK property must be set
# in /usr/lib/systemd/system/elasticsearch.service
MAX_LOCKED_MEMORY=<%= node.elasticsearch['limits']['memlock'] %>

# Specifies the maximum file descriptor number that can be opened by 
# this process. When using Systemd, this setting is ignored and the 
# LimitNOFILE defined in /usr/lib/systemd/system/elasticsearch.service 
# takes precedence.
MAX_OPEN_FILES=65535

# Maximum number of VMA (Virtual Memory Areas) a process can own.
# When using Systemd, this setting is ignored and the 'vm.max_map_count'
# property is set at boot time in /usr/lib/sysctl.d/elasticsearch.conf
<% if node.elasticsearch['index']['store']['type']=='mmapfs' -%>
MAX_MAP_COUNT=262144
<% else -%>
MAX_MAP_COUNT=65536
<% end -%>
